<server name="atm-server" class="org.jpos.q2.iso.QServer" logger="Q2">
    <attr name="port" type="java.lang.Integer">8000</attr>
    <channel class="org.jpos.iso.channel.ASCIIChannel" logger="Q2"
             packager="org.jpos.iso.packager.BASE24Packager" />

    <!--
        ThrottleAwareRequestListener accepts connections but returns ISO-8583 response
        with code 91 (System unavailable) when queue is over threshold.
        This is more graceful than rejecting TCP connections.
    -->
    <request-listener class="com.example.atm.ThrottleAwareRequestListener" logger="Q2" realm="incoming-request-listener">
        <property name="space" value="tspace:default" />
        <property name="queue" value="txnmgr" />
        <property name="timeout" value="60000" />
        <!-- ISO-8583 response code when throttled: 91 = System error/unavailable -->
        <property name="throttle-response-code" value="91" />
    </request-listener>
</server>
