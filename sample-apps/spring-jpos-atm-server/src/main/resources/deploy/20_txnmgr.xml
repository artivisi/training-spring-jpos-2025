<?xml version="1.0" encoding="UTF-8"?>
<txnmgr name="transactionManager" class="org.jpos.transaction.TransactionManager" logger="Q2">
    <property name="space" value="tspace:default" />
    <property name="queue" value="txnmgr" />
    <property name="sessions" value="10" />
    <property name="max-sessions" value="128" />
    <property name="debug" value="true" />

    <!-- MAC verification must be first to verify message integrity -->
    <participant class="com.example.atm.jpos.participant.MacVerificationParticipant" logger="Q2" realm="mac-verification" />
    <!-- Account validation before PIN verification - no need to verify PIN for non-existent accounts -->
    <participant class="com.example.atm.jpos.participant.AccountValidationParticipant" logger="Q2" realm="account-validation" />
    <participant class="com.example.atm.jpos.participant.PinVerificationParticipant" logger="Q2" realm="pin-verification" />
    <participant class="com.example.atm.jpos.participant.BalanceInquiryParticipant" logger="Q2" realm="balance-inquiry" />
    <participant class="com.example.atm.jpos.participant.WithdrawalParticipant" logger="Q2" realm="withdrawal" />
    <!-- Response participants - always run even when earlier participants abort -->
    <participant class="com.example.atm.jpos.participant.ResponseBuilderParticipant" logger="Q2" realm="response-builder" />
    <!-- MAC generation happens in commit phase of SendResponseParticipant -->
    <participant class="com.example.atm.jpos.participant.SendResponseParticipant" logger="Q2" realm="send-response" />
</txnmgr>
